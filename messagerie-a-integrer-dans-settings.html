<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inbox - Messaging</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <style>
        .message-item {
            cursor: pointer;
        }

        .message-item:hover {
            background-color: #f1f1f1;
        }

        .message-details {
            display: none;
        }

        .modal-body {
            padding-bottom: 0;
        }

        .modal-footer {
            justify-content: flex-start;
        }

        .response-box {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <!-- Boîte de réception -->
    <div class="row">
        <div class="col-md-8">
            <h5>Your Inbox</h5>
            <div class="list-group">
                <!-- Example of received message -->
                <div class="list-group-item message-item" data-toggle="modal" data-target="#messageModal" data-subject="Meeting Request" data-body="Hi, I wanted to schedule a meeting with you next week. Let me know your availability." data-sender="John Doe" data-date="2024-12-10">
                    <h5 class="mb-1">Meeting Request</h5>
                    <p class="mb-1">John Doe - 2024-12-10</p>
                    <small>Hi, I wanted to schedule a meeting with you next week...</small>
                </div>
                <!-- Add more messages here as needed -->
                <div class="list-group-item message-item" data-toggle="modal" data-target="#messageModal" data-subject="Project Update" data-body="The project status has been updated. Please check the dashboard." data-sender="Jane Smith" data-date="2024-12-09">
                    <h5 class="mb-1">Project Update</h5>
                    <p class="mb-1">Jane Smith - 2024-12-09</p>
                    <small>The project status has been updated...</small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal to display message details -->
<div class="modal fade" id="messageModal" tabindex="-1" role="dialog" aria-labelledby="messageModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="messageModalLabel">Message Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="messageContent">
                    <h5 id="messageSubject"></h5>
                    <p id="messageSender"></p>
                    <p id="messageDate"></p>
                    <p id="messageBody"></p>
                </div>

                <!-- Form for responding to the message -->
                <div class="response-box">
                    <h6>Your Reply:</h6>
                    <textarea id="responseText" class="form-control" rows="4" placeholder="Type your reply here..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="replyButton">Reply</button>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS & jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.bundle.min.js"></script>

<script>
    $(document).ready(function() {
        // When a message is clicked, update modal content
        $('.message-item').click(function() {
            var subject = $(this).data('subject');
            var body = $(this).data('body');
            var sender = $(this).data('sender');
            var date = $(this).data('date');

            $('#messageSubject').text(subject);
            $('#messageSender').text('From: ' + sender);
            $('#messageDate').text('Date: ' + date);
            $('#messageBody').text(body);
        });

        // Reply button functionality (currently just logs the reply content)
        $('#replyButton').click(function() {
            var replyMessage = $('#responseText').val();
            if (replyMessage.trim() !== '') {
                // Log the reply to the console (here you can send it to the backend)
                console.log('Reply Sent:', replyMessage);
                alert('Your reply has been sent!');
                $('#responseText').val(''); // Clear the text area after sending
            } else {
                alert('Please type a reply before sending.');
            }
        });
    });
</script>

</body>
</html>